(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{267:function(e,t,n){"use strict";n.r(t);var i=n(545);var s=n(420);for(var a in s)if(["default"].indexOf(a)<0)(function(e){n.d(t,e,(function(){return s[e]}))})(a);var r=n(529);var o=n(2);var l=Object(o["a"])(s["default"],i["a"],i["b"],false,null,"4d0f2770",null);t["default"]=l.exports},420:function(e,t,n){"use strict";n.r(t);var i=n(421);var s=n.n(i);for(var a in i)if(["default"].indexOf(a)<0)(function(e){n.d(t,e,(function(){return i[e]}))})(a);t["default"]=s.a},421:function(e,t,n){"use strict";var i=n(1);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(n(274));var a=i(n(525));var r=i(n(527));var o={name:"plugin-index",components:{StepSelectHost:r.default,StepPluginOperation:a.default},data:function e(){return{curStep:1,objectSteps:[{title:this.$t("选择主机"),icon:1},{title:this.$t("选择操作类型"),icon:2}],ipInfo:{},cmdbSettings:{isShow:false,title:this.$t("精确"),info:"123"},stepInterval:"",logId:""}},methods:{stepHandle:function e(t){this.curStep=t||this.curStep+1},paramsChange:function e(t){this.ipInfo=t},showSlider:function e(t){var n=this;this.cmdbSettings.isShow=!this.cmdbSettings.isShow;var i=this.appId;var s=t.id;this.logId=s;this.$store.dispatch("stall/getStepInfo",{appId:i,id:s}).then((function(e){n.cmdbSettings.info=e.data.logs}),(function(e){n.cmdbSettings.info=e.data.msg}));this.logSetInterval()},logSetInterval:function e(){var t=this;var n=this.appId;var i=this.logId;this.stepInterval=setInterval((function(){t.$store.dispatch("stall/getStepInfo",{appId:n,id:i}).then((function(e){t.cmdbSettings.info=e.data.logs;var n=document.getElementsByClassName("bk-sideslider-wrapper"),i=(0,s.default)(n,1),a=i[0];a.scrollTop=document.getElementsByClassName("bk-open-window")[0].offsetHeight;if(e.data.status==="FAILED"||e.data.status==="SUCCESS"||!t.cmdbSettings.isShow){clearInterval(t.stepInterval)}}),(function(){clearInterval(t.stepInterval)}))}),2e3)}}};t.default=o},422:function(e,t,n){"use strict";n.r(t);var i=n(423);var s=n.n(i);for(var a in i)if(["default"].indexOf(a)<0)(function(e){n.d(t,e,(function(){return i[e]}))})(a);t["default"]=s.a},423:function(e,t,n){"use strict";var i=n(1);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(n(5));var a=i(n(6));var r=i(n(17));var o=n(9);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);if(t)i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};if(t%2){l(Object(n),true).forEach((function(t){(0,r.default)(e,t,n[t])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(n))}else{l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}}return e}var u={props:{ipInfo:{type:Object,default:function e(){return{os_type:"",bk_biz_id:[],conditions:[],isAllChecked:false,exclude_hosts:[],bk_host_id:[]}},validator:function e(t){return t?t.os_type:false}}},data:function e(){return{secondClick:false,tabActive:"manager",navBar:[{id:1,name:"manager",label:this.$t("进程管理"),complete:true},{id:2,name:"update",label:this.$t("插件更新"),complete:false}],process:{operationList:[],pluginTypeList:[],pluginTypeSelected:1,pluginList:[],completeCheck:false,plugInfo:{name:"",details:""}},processForm:{bk_cloud_id:"",node_type:"AGENT",op_type:"",global_params:{plugin:{}},hosts:[{conn_ips:""}]},plugForm:{bk_cloud_id:"",node_type:"AGENT",op_type:"MAIN_INSTALL_PLUGIN",global_params:{plugin:{},package:{},control:{},option:{keep_config:0,no_restart:0,no_delegate:0},upgrade_type:"APPEND"},hosts:[{conn_ips:""}]},pluginUpload:{serviceList:[{id:1,name:"GSE ".concat(this.$t("插件"))}],serviceSelected:1,serviceDisabled:true,newPackageList:[],packageSelected:0,packageInfo:{mdFive:"",uploadTime:""},packageCheckList:[{id:1,name:this.$t("保留原有配置文件"),checkStatus:false},{id:2,name:this.$t("仅更新文件，不重启进程"),checkStatus:false}],uploadTypeList:[{id:1,name:this.$t("增量更新(仅覆盖)"),type:"APPEND"},{id:2,name:this.$t("覆盖更新(先删除原目录后覆盖)"),type:"OVERRIDE"}],uploadTypeSelected:1},configuUpload:{fileFormat:[{id:1,name:"yaml",checkStatus:true},{id:2,name:"json",checkStatus:false},{id:3,name:"ini",checkStatus:false}]},fileInfo:{showStatus:false,list:[]},loadingPackage:false}},created:function e(){this.getOperatList();this.getPlufList()},methods:c(c({},(0,o.mapActions)("plugin",["getProcessList","listPackage","operatePlugin"])),{},{getOperatList:function e(){this.process.operationList=[{id:"MAIN_START_PLUGIN",name:this.$t("启动")},{id:"MAIN_STOP_PLUGIN",name:this.$t("停止")},{id:"MAIN_RESTART_PLUGIN",name:this.$t("重启")},{id:"MAIN_RELOAD_PLUGIN",name:this.$t("重载")},{id:"MAIN_DELEGATE_PLUGIN",name:this.$t("托管")},{id:"MAIN_UNDELEGATE_PLUGIN",name:this.$t("取消托管")}];this.process.operationList.forEach((function(e){e.complete=false}))},getPlufList:function e(){this.process.pluginTypeList=[];var t=[{id:"official",name:this.$t("官方插件")},{id:"external",name:this.$t("第三方插件")},{id:"scripts",name:this.$t("脚本插件")}];for(var n=0;n<t.length;n++){this.process.pluginTypeList.push({id:n+1,name:t[n].name,info:t[n].id})}if(!this.process.pluginTypeList.length){return}var i=this.process.pluginTypeList[0].info;this.getPlugInfo(i)},getPlugInfo:function e(t){var n=this;return(0,a.default)(s.default.mark((function e(){var i,a;return s.default.wrap((function e(s){while(1){switch(s.prev=s.next){case 0:s.next=2;return n.getProcessList(t);case 2:i=s.sent;n.process.pluginList=i;if(i.length){a=i[0];n.changePlugin(a.name)}else{n.changePlugin("")}case 5:case"end":return s.stop()}}}),e)})))()},getPackageList:function e(t){var n=this;return(0,a.default)(s.default.mark((function e(){var i,a;return s.default.wrap((function e(s){while(1){switch(s.prev=s.next){case 0:n.loadingPackage=true;i=n.ipInfo.os_type;s.next=4;return n.listPackage({pk:t,data:{os:i}});case 4:a=s.sent;n.pluginUpload.newPackageList=a;n.pluginUpload.newPackageList.forEach((function(e){e.name=e.pkg_name}));n.pluginUpload.packageInfo.mdFive="";n.pluginUpload.packageInfo.uploadTime="";n.loadingPackage=false;case 10:case"end":return s.stop()}}}),e)})))()},changeNav:function e(t){var n=this.navBar.findIndex((function(e){return e.name===t}));this.navBar.forEach((function(e){e.complete=false}));this.navBar[n].complete=true;if(n===1){this.pluginUpload.newPackageList=[];this.pluginUpload.packageSelected=0}this.clearInfo()},clearInfo:function e(){this.processForm={bk_cloud_id:"",node_type:"AGENT",op_type:"",global_params:{plugin:{}},hosts:[{conn_ips:""}]};this.plugForm={bk_cloud_id:"",node_type:"AGENT",op_type:"MAIN_INSTALL_PLUGIN",global_params:{plugin:{},package:{},control:{},option:{keep_config:0,no_restart:0,no_delegate:0},upgrade_type:"APPEND"},hosts:[{conn_ips:""}]};this.pluginUpload.packageCheckList.forEach((function(e){e.checkStatus=false}));this.pluginUpload.uploadTypeSelected=1;this.process.plugInfo.name="";this.process.plugInfo.details=""},changeOperation:function e(t,n){this.process.operationList.forEach((function(e,t){e.complete=n===t}));this.process.operationList[n].complete=true;this.processForm.op_type=t.id;this.process.operationList=JSON.parse(JSON.stringify(this.process.operationList))},changePluginType:function e(t){var n=this.process.pluginTypeList.find((function(e){return e.id===t}));var i=n.info;this.getPlugInfo(i);this.processForm.global_params.plugin={};this.pluginUpload.packageSelected="";this.pluginUpload.newPackageList=[]},changePlugin:function e(t){var n=this.process.pluginList.find((function(e){return e.name===t}));if(!n){this.process.plugInfo.name="";this.process.plugInfo.details="";return}this.process.pluginList.forEach((function(e){e.complete=false}));this.process.plugInfo.name=n.name;this.process.plugInfo.details=this.$i18n.locale==="en"?n.scenario_en:n.scenario;this.processForm.global_params.plugin=n;if(this.navBar[1].complete){this.pluginUpload.packageSelected="";this.pluginUpload.newPackageList=[];var i=n.name;this.getPackageList(i)}},changePackage:function e(t){var n=this.pluginUpload.newPackageList.find((function(e){return e.id===t}));if(!n)return;this.pluginUpload.packageInfo.mdFive=n.md5;this.pluginUpload.packageInfo.uploadTime=n.pkg_mtime;this.plugForm.global_params.package=n},checkPackage:function e(t){t.checkStatus=!t.checkStatus;this.pluginUpload.packageCheckList=JSON.parse(JSON.stringify(this.pluginUpload.packageCheckList))},checkProcessInfo:function e(){var t=this.$t("请选择操作");t=this.processForm.op_type&&this.processForm.global_params.plugin.id?"":this.$t("请选择插件");if(t){this.$bkMessage({message:t,theme:"error"})}return!!t},processManage:function e(){if(this.secondClick){return}var t={job_type:this.processForm.op_type,plugin_params:{name:this.processForm.global_params.plugin.name},bk_biz_id:this.ipInfo.bk_biz_id};if(this.ipInfo.isAllChecked){t.conditions=this.ipInfo.conditions;t.exclude_hosts=this.ipInfo.exclude_hosts}else{t.bk_host_id=this.ipInfo.bk_host_id}this.uploadAjax(t)},checkPlugInfo:function e(){var t=this.$t("请选择插件");if(this.processForm.global_params.plugin.id){if(this.pluginUpload.packageSelected!==""){t=this.pluginUpload.uploadTypeSelected!==""?"":this.$t("请选择更新类型")}else{t=this.$t("请选择新包")}}if(t){this.$bkMessage({message:t,theme:"error"})}return!!t},plugUploadInfo:function e(){if(this.secondClick){return}this.secondClick=true;this.plugForm.global_params.option.keep_config=this.pluginUpload.packageCheckList[0].checkStatus?1:0;this.plugForm.global_params.option.no_restart=this.pluginUpload.packageCheckList[1].checkStatus?1:0;this.plugForm.global_params.option.no_delegate=0;var t={job_type:this.plugForm.op_type,plugin_params:{name:this.processForm.global_params.plugin.name,version:this.plugForm.global_params.package.version,keep_config:this.plugForm.global_params.option.keep_config,no_restart:this.plugForm.global_params.option.no_restart},bk_biz_id:this.ipInfo.bk_biz_id};if(this.ipInfo.isAllChecked){t.conditions=this.ipInfo.conditions;t.exclude_hosts=this.ipInfo.exclude_hosts}else{t.bk_host_id=this.ipInfo.bk_host_id}this.uploadAjax(t)},uploadAjax:function e(t){var n=this;return(0,a.default)(s.default.mark((function e(){var i;return s.default.wrap((function e(s){while(1){switch(s.prev=s.next){case 0:n.secondClick=true;s.next=3;return n.operatePlugin(t);case 3:i=s.sent;if(i?i.job_id:false){n.$router.push({name:"taskDetail",params:{taskId:i.job_id}})}n.secondClick=false;case 6:case"end":return s.stop()}}}),e)})))()},clickNext:function e(){if(this.navBar[0].complete){if(this.checkProcessInfo()){return}this.processManage()}if(this.navBar[1].complete){if(this.checkPlugInfo()){return}this.plugUploadInfo()}},stepHandle:function e(t){this.$emit("stepChange",t)},backPrevious:function e(){this.clearInfo();this.$parent.originalTree()},closeFile:function e(){this.fileInfo.showStatus=!this.fileInfo.showStatus}})};t.default=u},424:function(e,t,n){},425:function(e,t,n){"use strict";n.r(t);var i=n(426);var s=n.n(i);for(var a in i)if(["default"].indexOf(a)<0)(function(e){n.d(t,e,(function(){return i[e]}))})(a);t["default"]=s.a},426:function(e,t,n){"use strict";var i=n(1);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(n(8));var a=i(n(5));var r=i(n(274));var o=i(n(6));var l=i(n(275));var c=i(n(17));var u=n(9);var p=i(n(439));var d=i(n(279));var f=i(n(278));var h=n(10);var g=i(n(276));var v=n(280);var _=n(13);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);if(t)i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));n.push.apply(n,i)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};if(t%2){b(Object(n),true).forEach((function(t){(0,c.default)(e,t,n[t])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(n))}else{b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}}return e}var m={name:"step-select-host",mixins:[d.default,f.default],data:function e(){return{table:{data:[],pagination:{current:1,count:0,limit:50,limitList:[50,100,200]}},checkedCount:0,loading:false,checkLoading:false,selectionRow:[],listenResize:null,isScroll:false,filter:{inner_ip:{checked:true,disabled:true,mockChecked:true,name:"IP",id:"inner_ip"},agent_version:{checked:true,disabled:false,mockChecked:true,name:this.$t("Agent版本"),id:"agent_version"},agent_status:{checked:true,disabled:true,mockChecked:true,name:this.$t("Agent状态"),id:"agent_status"},bk_cloud_id:{checked:true,mockChecked:true,disabled:false,name:this.$t("云区域"),id:"bk_cloud_id"},bk_biz_name:{checked:true,disabled:false,mockChecked:true,name:this.$t("业务"),id:"bk_biz_name"},topology:{checked:false,disabled:false,mockChecked:false,name:this.$t("业务拓扑"),id:"topology"},os_type:{checked:true,disabled:false,mockChecked:true,name:this.$t("操作系统"),id:"os_type"},node_from:{checked:false,disabled:false,mockChecked:false,name:this.$t("节点来源"),id:"node_from"}},statusMap:{running:this.$t("正常"),terminated:this.$t("异常"),unknown:this.$t("未知"),unregister:this.$t("未知")},osMap:{LINUX:"Linux",WINDOWS:"Windows",AIX:"AIX"},osType:{AGENT:"Agent",PROXY:"Proxy",PAGENT:"P-Agent"},pluginList:["basereport","processbeat","exceptionbeat","bkunifylogbeat","bkmonitorbeat"],search:{biz:[],osType:""},osTypeList:[],initAgentListDebounce:function e(){},isSelectedAllPages:false,markDeleteArr:[],ipRegx:new RegExp("^((25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(25[0-5]|2[0-4]\\d|[01]?\\d\\d?)$"),operateBiz:[]}},computed:k(k(k(k({},(0,u.mapGetters)(["cloudList","permissionSwitch"])),(0,u.mapGetters)("agent",["cloudList"])),(0,u.mapGetters)(["bkBizList","selectedBiz","fontSize"])),{},{selection:function e(){return this.table.data.filter((function(e){return e.status==="running"&&e.selection}))},indeterminate:function e(){var t=this;if(this.isSelectedAllPages){return!!this.markDeleteArr.length&&this.markDeleteArr.length!==this.table.pagination.count}return!this.table.data.every((function(e){return e.job_result.status==="RUNNING"||e.selection||(t.permissionSwitch?!e.operate_permission:false)}))&&!this.table.data.every((function(e){return e.job_result.status==="RUNNING"||!e.selection||(t.permissionSwitch?!e.operate_permission:false)}))},isAllChecked:function e(){var t=this;if(this.isSelectedAllPages){return!this.markDeleteArr.length}return!!this.table.data.filter((function(e){return e.status==="running"&&(t.permissionSwitch?e.operate_permission:true)})).length&&this.table.data.every((function(e){return e.status!=="running"||e.selection||(t.permissionSwitch?!e.operate_permission:false)}))},disabledCheckBox:function e(){var t=this;return this.table.data.every((function(e){return e.status!=="running"||(t.permissionSwitch?!e.operate_permission:false)}))},selectionCount:function e(){if(this.isSelectedAllPages){return this.checkedCount?this.checkedCount-this.markDeleteArr.length:0}return this.selection.length},disabledTip:function e(){if(this.isNextStep)return true;if(this.isSelectedAllPages){return false}return new Set(this.selectionRow.map((function(e){return e.os_type}))).size<=1},isSingleSystem:function e(){return this.osTypeList.length===1||this.search.osType},isNextStep:function e(){if(this.isSingleSystem){return this.selectionCount}return this.selectionRow.length>0&&new Set(this.selectionRow.map((function(e){return e.os_type}))).size===1},currentOsType:function e(){if(this.isNextStep){if(this.isSelectedAllPages){return this.search.osType}var t=(0,l.default)(new Set(this.selectionRow.map((function(e){return e.os_type}))));return t[0]}return""},checkAllPermission:function e(){return this.table.data.length?this.table.data.some((function(e){return e.operate_permission})):true},operateBizPermission:function e(){if(this.permissionSwitch&&!this.operateBiz.length){return"plugin_operate"}return""}}),watch:{searchSelectValue:{handler:function e(){this.table.pagination.current=1;this.initAgentListDebounce()},deep:true}},created:function e(){this.search.biz=this.selectedBiz;this.handleInit()},mounted:function e(){var t=this;this.listenResize=(0,h.debounce)(300,(function(e){return t.handleResize(e)}));this.initAgentListDebounce=(0,h.debounce)(300,this.initAgentList);(0,v.addListener)(this.$el,this.listenResize)},beforeDestroy:function e(){(0,v.removeListener)(this.$el,this.listenResize)},methods:k(k(k({},(0,u.mapActions)(["getBkBizPermission"])),(0,u.mapActions)("plugin",["getHostList","getFilterCondition"])),{},{handleInit:function e(){var t=this;return(0,o.default)(a.default.mark((function e(){return a.default.wrap((function e(n){while(1){switch(n.prev=n.next){case 0:t.loading=true;n.next=3;return t.getFilterCondition().then((function(e){var n=e.findIndex((function(e){return e.id==="os_type"}));try{if(n>-1){var i=e.splice(n,1),s=(0,r.default)(i,1),a=s[0];var o=a.children||[];if(o.length){t.search.osType=o.find((function(e){return e.id==="LINUX"}))?"LINUX":o[0].id}t.osTypeList=o}}catch(e){}e.forEach((function(e){if(e.id==="version"){e.showSearch=true;e.showCheckAll=true}}));t.filterData=e}));case 3:t.initAgentList();if(t.permissionSwitch){t.getBizOperaPermission()}case 5:case"end":return n.stop()}}}),e)})))()},toggleExpansion:function e(t){this.$refs.hostTable.toggleRowExpansion(t)},getRowStyle:function e(t){var n=t.row;return n.status==="running"?{}:{color:"#C3CDD7"}},stepHandle:function e(){var t={conditions:[],isAllChecked:this.isSelectedAllPages};if(this.search.biz.length&&this.search.biz.length!==this.bkBizList.length){t.bk_biz_id=this.search.biz}if(this.isSelectedAllPages){t.exclude_hosts=this.markDeleteArr.map((function(e){return e.bk_host_id}))||[];var n=this.searchSelectValue.find((function(e){return e.id==="status"}));if(!n){t.conditions.push({key:"status",value:["RUNNING"]})}}else{t.bk_host_id=this.selectionRow.map((function(e){return e.bk_host_id}))||[]}this.searchSelectValue.forEach((function(e){if(Array.isArray(e.values)){var n=e.values.map((function(e){return e.id}));t.conditions.push({key:e.id,value:n})}else{t.conditions.push({key:"query",value:e.name})}}));if(this.currentOsType){t.os_type=this.currentOsType;t.conditions.push({key:"os_type",value:[this.currentOsType]})}this.$emit("paramsChange",t);this.$emit("stepChange",2)},initAgentList:function e(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;return(0,o.default)(a.default.mark((function e(){var i,s,r;return a.default.wrap((function e(a){while(1){switch(a.prev=a.next){case 0:t.loading=true;t.runingQueue.splice(0,t.runingQueue.length);clearTimeout(t.timer);t.timer=null;i=t.getSearchCondition();a.next=7;return t.getHostList(i);case 7:s=a.sent;if(!n){t.isSelectedAllPages=false;t.markDeleteArr.splice(0,t.markDeleteArr.length);t.selectionRow.splice(0,t.selectionRow.length);t.handleClearSelection()}r=t.selectionRow.length;t.table.data=s.list.map((function(e){if(e.status==="running"){if(t.isSelectedAllPages){e.selection=!t.markDeleteArr.find((function(t){return t.bk_host_id===e.bk_host_id}))}else{e.selection=r?!!t.selectionRow.find((function(t){return t.bk_host_id===e.bk_host_id})):false}}else{e.selection=false}t.handleCommonPlugins(e,e.plugin_status||[]);t.runingQueue.push(e.bk_host_id);return e}));t.table.pagination.count=s.total;t.loading=false;t.$nextTick(t.listenResize);case 14:case"end":return a.stop()}}}),e)})))()},handlePollData:function e(){var t=this;return(0,o.default)(a.default.mark((function e(){var n;return a.default.wrap((function e(i){while(1){switch(i.prev=i.next){case 0:i.next=2;return t.getHostList({page:1,pagesize:t.runingQueue.length,bk_host_id:t.runingQueue});case 2:n=i.sent;t.handleChangeStatus(n);case 4:case"end":return i.stop()}}}),e)})))()},handleChangeStatus:function e(t){var n=this;t.list.forEach((function(e){var t=n.table.data.find((function(t){return t.bk_host_id===e.bk_host_id}));if(t){t.status=e.status;t.status_display=e.status_display;t.version=e.version;n.handleCommonPlugins(t,e.plugin_status||[])}}))},handleCommonPlugins:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];if(Array.isArray(n)){var i;this.pluginList.forEach((function(e){var i=n.find((function(t){return e===t.name}));t["".concat(e,"Status")]=i&&i.status?i.status.toLowerCase():"unknow";t["".concat(e,"Version")]=i&&i.version?i.version:"--"}));(i=t.plugin_status).splice.apply(i,[0,t.plugin_status.length].concat((0,l.default)(n)))}},getCommonCondition:function e(){var t={conditions:[]};if(this.search.biz.length&&this.search.biz.length!==this.bkBizList.length){t.bk_biz_id=this.search.biz}this.searchSelectValue.forEach((function(e){if(Array.isArray(e.values)){t.conditions.push({key:e.id,value:e.values.map((function(e){return e.id}))})}else{t.conditions.push({key:"query",value:e.name})}}));if(this.search.osType){t.conditions.push({key:"os_type",value:[this.search.osType]})}return t},getSearchCondition:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var n={pagesize:-1};if(!t){n.page=this.table.pagination.current;n.pagesize=this.table.pagination.limit}return(0,s.default)(n,this.getCommonCondition())},getExcludeHostCondition:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var n={pagesize:-1,exclude_hosts:this.markDeleteArr.map((function(e){return e.bk_host_id})),extra_data:t};return(0,s.default)(n,this.getCommonCondition())},getCheckedIpCondition:function e(){var t={pagesize:-1,only_ip:true};if(this.isSelectedAllPages){t.exclude_hosts=this.markDeleteArr.map((function(e){return e.bk_host_id}))}return(0,s.default)(t,this.getCommonCondition())},getAllIpCondition:function e(){var t={pagesize:-1,only_ip:true};return(0,s.default)(t,this.getCommonCondition())},handleBizChange:function e(){this.table.pagination.current=1;this.initAgentListDebounce()},handlePageChange:function e(t){this.table.pagination.current=t||1;this.initAgentList(true)},handlePageLimitChange:function e(t){this.table.pagination.limit=t;this.handlePageChange()},handleRowCheck:function e(t,n){if(this.isSelectedAllPages){if(!t[0]){this.markDeleteArr.push(n)}else{var i=this.markDeleteArr.findIndex((function(e){return e.bk_host_id===n.bk_host_id}));if(i>-1){this.markDeleteArr.splice(i,1)}}}else{this.setSelectionRow(t[0],[n])}this.$set(n,"selection",t[0])},stopBubble:function e(){return false},renderSelectionHeader:function e(){var t=this;var n=this.$createElement;return n(p.default,{ref:"customSelectionHeader",attrs:{indeterminate:this.indeterminate,isAllChecked:this.isAllChecked,loading:this.checkLoading,disabled:this.disabledCheckBox,action:this.operateBizPermission,checkAllPermission:this.checkAllPermission},on:{change:function e(n,i){return t.handleCheckAll(n,i)}}})},handleCheckAll:function e(t,n){var i=this;return(0,o.default)(a.default.mark((function e(){var s;return a.default.wrap((function e(a){while(1){switch(a.prev=a.next){case 0:if(!(n==="current"&&i.disabledCheckBox)){a.next=2;break}return a.abrupt("return");case 2:if(!(n==="all")){a.next=10;break}i.checkLoading=true;s=i.runingQueue.splice(0,i.runingQueue.length);clearTimeout(i.timer);a.next=8;return i.getCheckedCount();case 8:i.checkLoading=false;i.runingQueue=(0,l.default)(s);case 10:i.isSelectedAllPages=t&&n==="all";i.markDeleteArr.splice(0,i.markDeleteArr.length);i.table.data.forEach((function(e){if(e.status==="running"&&(i.permissionSwitch?e.operate_permission:true)){i.$set(e,"selection",t)}}));i.setSelectionRow(t,n==="all"?{}:i.table.data.filter((function(e){return e.status==="running"})),n);case 14:case"end":return a.stop()}}}),e)})))()},setSelectionRow:function e(t,n){var i=this;var s=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"single";if(s==="all"){this.selectionRow.splice(0,this.selectionRow.length)}else{if(t){n.forEach((function(e){i.selectionRow.push(e)}))}else{n.forEach((function(e){var t=i.selectionRow.findIndex((function(t){return t.bk_host_id===e.bk_host_id}));if(t>-1){i.selectionRow.splice(t,1)}}))}}},handleClearSelection:function e(){_.bus.$emit("unchecked-all-agent")},handlePaste:function e(t){var n=this;var i=(0,r.default)(t.clipboardData.items,1),a=i[0];a.getAsString((function(e){var i=n.$refs.searchSelect;var a=false;if(i.input&&!(0,h.isEmpty)(i.input.value)){var r=i.input.value;a=/ip/i.test(i.input.value);(0,s.default)(t.target,{innerText:a?"":r+e});n.$refs.searchSelect.handleInputChange(t);n.$refs.searchSelect.handleInputFocus(t)}else{a=true}if(a){var o=e.replace(/;+|；+|_+|\\+|，+|,+|、+|\s+/g,",").replace(/,+/g," ").trim();var l=["，"," ","、",",","\n"].find((function(e){return o.indexOf(e)>0}))||"\n";var c=o.trim().split(l);var u=c.every((function(e){return n.ipRegx.test(e)}));if(u){n.handlePushValue("inner_ip",c.map((function(e){return{id:e,name:e}})))}else{n.searchSelectValue.push({id:o.trim().replace("\n",""),name:o.trim().replace("\n","")})}}}))},handleCellClass:function e(t){var n=t.column;if(n.property&&n.property==="topology"){return"col-topology"}},getOperateShow:function e(t,n){if(n.id==="log"&&(!t.job_result||!t.job_result.job_id)){return false}return n.show},handleResize:function e(){this.isScroll=this.$el.scrollHeight+60>this.$root.$el.clientHeight-52},getCheckedCount:function e(){var t=this;return(0,o.default)(a.default.mark((function e(){var n,i,s;return a.default.wrap((function e(a){while(1){switch(a.prev=a.next){case 0:n=t.getSearchCondition(true);i=n.conditions.find((function(e){return e.key==="status"}));if(i){if(!i.value.find((function(e){return e==="RUNNING"}))){i.value.push("RUNNING")}}else{n.conditions.push({key:"status",value:["RUNNING"]})}a.next=5;return t.getHostList(n);case 5:s=a.sent;t.checkedCount=s.total;return a.abrupt("return",s);case 8:case"end":return a.stop()}}}),e)})))()},renderHeader:function e(){var t=this.$createElement;return t(g.default)},colspanHandle:function e(t){var n=t.column;if(n.property===this.pluginList[4]){return[1,2]}if(n.property==="colspaSetting"){return[0,0]}},getBizOperaPermission:function e(){var t=this;return(0,o.default)(a.default.mark((function e(){var n;return a.default.wrap((function e(i){while(1){switch(i.prev=i.next){case 0:i.next=2;return t.getBkBizPermission({action:"plugin_operate"});case 2:n=i.sent;t.operateBiz=Array.isArray(n)?n:[];case 4:case"end":return i.stop()}}}),e)})))()}})};t.default=m},427:function(e,t,n){},428:function(e,t,n){},525:function(e,t,n){"use strict";n.r(t);var i=n(574);var s=n(422);for(var a in s)if(["default"].indexOf(a)<0)(function(e){n.d(t,e,(function(){return s[e]}))})(a);var r=n(526);var o=n(2);var l=Object(o["a"])(s["default"],i["a"],i["b"],false,null,"2f0000bc",null);t["default"]=l.exports},526:function(e,t,n){"use strict";var i=n(424);var s=n.n(i);var a=s.a},527:function(e,t,n){"use strict";n.r(t);var i=n(567);var s=n(425);for(var a in s)if(["default"].indexOf(a)<0)(function(e){n.d(t,e,(function(){return s[e]}))})(a);var r=n(528);var o=n(2);var l=Object(o["a"])(s["default"],i["a"],i["b"],false,null,"8146b896",null);t["default"]=l.exports},528:function(e,t,n){"use strict";var i=n(427);var s=n.n(i);var a=s.a},529:function(e,t,n){"use strict";var i=n(428);var s=n.n(i);var a=s.a},545:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n.d(t,"b",(function(){return s}));var i=function(){var e=this;var t=e.$createElement;var n=e._self._c||t;return n("div",{staticClass:"plugin-wrapper"},[n("div",{staticClass:"plugin-title"},[n("bk-steps",{attrs:{"ext-cls":"plugin-step","cur-step":e.curStep,steps:e.objectSteps},on:{"update:curStep":function(t){e.curStep=t},"update:cur-step":function(t){e.curStep=t}}})],1),e._v(" "),n("div",{staticClass:"plugin-content"},[e.curStep===1?n("StepSelectHost",{staticClass:"plugin-steps",on:{stepChange:e.stepHandle,paramsChange:e.paramsChange}}):e._e(),e._v(" "),e.curStep===2?n("StepPluginOperation",{staticClass:"plugin-steps",attrs:{"ip-info":e.ipInfo},on:{stepChange:e.stepHandle}}):e._e(),e._v(" "),n("bk-sideslider",{attrs:{"is-show":e.cmdbSettings.isShow,title:e.cmdbSettings.title,width:553,"quick-close":true},on:{"update:isShow":function(t){return e.$set(e.cmdbSettings,"isShow",t)},"update:is-show":function(t){return e.$set(e.cmdbSettings,"isShow",t)}}},[n("div",{staticClass:"p20 bk-open-window",attrs:{slot:"content"},slot:"content"},[n("div",{staticClass:"bk-install-step",attrs:{id:"bkStep"}},[n("div",{staticClass:"bk-step-info",domProps:{innerHTML:e._s(e.cmdbSettings.info)}})])])])],1)])};var s=[]},567:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n.d(t,"b",(function(){return s}));var i=function(){var e=this;var t=e.$createElement;var n=e._self._c||t;return n("div",{class:["plugin-steps",{"footer-fixed":e.isScroll&&e.table.data.length}]},[n("section",{staticClass:"agent-operate mb15"},[n("div",{staticClass:"agent-operate-left"},[n("bk-biz-select",{attrs:{"ext-cls":"left-select",placeholder:e.$t("全部业务")},on:{change:e.handleBizChange},model:{value:e.search.biz,callback:function(t){e.$set(e.search,"biz",t)},expression:"search.biz"}}),e._v(" "),n("bk-select",{staticClass:"plugin-select ml10",attrs:{"popover-options":{boundary:"window"},clearable:false},on:{selected:e.handleBizChange},model:{value:e.search.osType,callback:function(t){e.$set(e.search,"osType",t)},expression:"search.osType"}},e._l(e.osTypeList,(function(e){return n("bk-option",{key:e.id,attrs:{id:e.id,name:e.name}})})),1)],1),e._v(" "),n("div",{staticClass:"agent-operate-right"},[n("bk-search-select",{ref:"searchSelect",attrs:{"ext-cls":"right-select",data:e.searchSelectData,"show-condition":false,placeholder:e.$t("agent列表搜索")},on:{change:e.handleSearchSelectChange},nativeOn:{"!paste":function(t){t.preventDefault();return e.handlePaste(t)}},model:{value:e.searchSelectValue,callback:function(t){e.searchSelectValue=t},expression:"searchSelectValue"}})],1)]),e._v(" "),n("section",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:e.loading},expression:"{ isLoading: loading }"}],staticClass:"agent-content"},[n("bk-table",{ref:"hostTable",class:"head-customize-table "+e.fontSize,attrs:{data:e.table.data,"cell-class-name":e.handleCellClass,"span-method":e.colspanHandle,"ext-cls":"agent-content-table","row-style":e.getRowStyle},on:{"row-click":e.toggleExpansion},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("transition",{attrs:{name:"tips"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isAllChecked&&e.selectionCount,expression:"isAllChecked && selectionCount"}],staticClass:"selection-tips"},[n("div",[e._v("\n              "+e._s(e.$t("已选"))+"\n              "),n("span",{staticClass:"tips-num"},[e._v(e._s(e.selectionCount))]),e._v("\n              "+e._s(e.$t("条"))+",\n            ")]),e._v(" "),!e.isSelectedAllPages?n("div",[e._v("\n              "+e._s(e.$t("共"))+"\n              "),n("span",{staticClass:"tips-num"},[e._v(e._s(e.table.pagination.count))]),e._v("\n              "+e._s(e.$t("条"))+"\n            ")]):n("bk-button",{attrs:{"ext-cls":"tips-btn",text:""},on:{click:e.handleClearSelection}},[e._v(e._s(e.$t("清除所有数据")))])],1)])]},proxy:true}])},[e._v(" "),n("bk-table-column",{attrs:{type:"expand",width:"30",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[n("section",{staticClass:"host-plugin expand-row clearfix"},[Array.isArray(i.plugin_status)&&i.plugin_status.length?e._l(i.plugin_status,(function(t){return n("div",{key:t.name,staticClass:"host-plugin-item"},[t?n("div",{staticClass:"col-status"},[n("span",{staticClass:"plugin-name"},[e._v(e._s(t.name)+"：")]),e._v(" "),n("span",{class:"status-mark status-"+t.status.toLowerCase()}),e._v(" "),n("span",{staticClass:"plugin-version"},[e._v(e._s(t.version||"--"))])]):e._e()])})):n("p",{staticClass:"tc"},[e._v(e._s(e.$t("暂无其他插件信息")))])],2)]}}])}),e._v(" "),n("bk-table-column",{key:"selection",attrs:{width:"70",align:"left",resizable:false,"render-header":e.renderSelectionHeader},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[n("auth-component",{staticClass:"inline-block",attrs:{tag:"div",auth:{permission:i.operate_permission,apply_info:[{action:"plugin_operate",instance_id:i.bk_biz_id,instance_name:i.bk_biz_name}]}},on:{click:e.stopBubble},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.disabled;return[n("bk-checkbox",{attrs:{value:i.selection,disabled:i.status!=="running"||s},on:{change:function(t){return e.handleRowCheck(arguments,i)}}})]}}],null,true)})]}}])}),e._v(" "),n("bk-table-column",{attrs:{"class-name":"row-ip","min-width":"50",label:e.$t("节点类型"),prop:"node_type",resizable:false},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[n("span",[e._v(e._s(i.node_type?e.osType[i.node_type]:"--"))])]}}])}),e._v(" "),n("bk-table-column",{key:"IP",attrs:{label:"IP",prop:"inner_ip",resizable:false}}),e._v(" "),e.filter["bk_biz_name"].mockChecked?n("bk-table-column",{key:"biz",attrs:{label:e.$t("归属业务"),prop:"bk_biz_name",resizable:false}}):e._e(),e._v(" "),e.filter["bk_cloud_id"].mockChecked?n("bk-table-column",{key:"cloudArea",attrs:{label:e.$t("云区域"),"render-header":e.renderFilterHeader,prop:"bk_cloud_id",resizable:false},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[i.bk_cloud_name?n("span",[e._v(e._s(i.bk_cloud_name))]):n("span",[e._v("--")])]}}],null,false,2944782263)}):e._e(),e._v(" "),e.filter["os_type"].mockChecked?n("bk-table-column",{key:"system",attrs:{label:e.$t("操作系统"),prop:"os_type",resizable:false,"render-header":e.renderFilterHeader},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v("\n          "+e._s(e.osMap[n.os_type]||"--")+"\n        ")]}}],null,false,2413293826)}):e._e(),e._v(" "),e.filter["agent_status"].mockChecked?n("bk-table-column",{key:"status",attrs:{label:e.$t("Agent状态"),prop:"status","render-header":e.renderFilterHeader,resizable:false},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[i.status_display?n("div",{staticClass:"col-status"},[n("span",{class:"status-mark status-"+i.status}),e._v(" "),n("span",[e._v(e._s(i.status_display))])]):n("div",{staticClass:"col-status"},[n("span",{staticClass:"status-mark status-unknown"}),e._v(" "),n("span",[e._v(e._s(i.status_display))])])]}}],null,false,3702220420)}):e._e(),e._v(" "),e.filter["agent_version"].mockChecked?n("bk-table-column",{key:"version",attrs:{label:e.$t("Agent版本"),prop:"version","render-header":e.renderFilterHeader,resizable:false},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[n("span",[e._v(e._s(i.version||"--"))])]}}],null,false,1895869086)}):e._e(),e._v(" "),e._l(e.pluginList,(function(t,i){return[n("bk-table-column",{key:i,attrs:{label:t,prop:t,"render-header":e.renderFilterHeader,resizable:false},scopedSlots:e._u([{key:"default",fn:function(i){var s=i.row;return[e.statusMap[s[t+"Status"]]?n("div",{staticClass:"col-status"},[n("span",{class:"status-mark status-"+s[t+"Status"]}),e._v(" "),n("span",[e._v(e._s(s[t+"Version"]))])]):n("div",{staticClass:"col-status"},[n("span",{staticClass:"status-mark status-unknown"}),e._v(" "),n("span",[e._v(e._s(s[t+"Version"]))])])]}}],null,true)})]})),e._v(" "),n("bk-table-column",{key:"setting",attrs:{prop:"colspaSetting","render-header":e.renderHeader,width:"42",resizable:false}})],2),e._v(" "),n("bk-pagination",{attrs:{"ext-cls":"pagination",size:"small",limit:e.table.pagination.limit,count:e.table.pagination.count,current:e.table.pagination.current,"limit-list":e.table.pagination.limitList,align:"right","show-total-count":"","show-selection-count":"","selection-count":e.selectionCount},on:{change:e.handlePageChange,"limit-change":e.handlePageLimitChange}}),e._v(" "),!e.loading?n("div",{staticClass:"bk-plugin-button"},[n("bk-popover",{attrs:{placement:"right",disabled:e.disabledTip,content:e.$t("无可操作的主机")}},[n("bk-button",{attrs:{theme:"primary",disabled:!e.isNextStep},on:{click:e.stepHandle}},[e._v("\n          "+e._s(e.$t("下一步"))+"\n        ")])],1)],1):e._e()],1)])};var s=[]},574:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n.d(t,"b",(function(){return s}));var i=function(){var e=this;var t=e.$createElement;var n=e._self._c||t;return n("div",{staticClass:"bk-plugin-operation"},[n("div",{staticClass:"bk-operat-nav"},[n("bk-tab",{attrs:{"ext-cls":"bk-plugin-tab",active:e.tabActive,type:"unborder-card"},on:{"update:active":function(t){e.tabActive=t},"tab-change":e.changeNav}},e._l(e.navBar,(function(t,i){return n("bk-tab-panel",e._b({key:i},"bk-tab-panel",t,false))})),1)],1),e._v(" "),e.tabActive==="manager"?n("div",{staticClass:"bk-operat-process"},[n("div",{staticClass:"bk-process-info"},[n("div",{staticClass:"bk-process-operation clearfix-none"},[n("div",{staticClass:"bk-operation-left"},[n("span",[e._v(e._s(e.$t("选择操作"))+"：")])]),e._v(" "),n("div",{staticClass:"bk-operation-right"},[n("div",{staticClass:"bk-button-group"},e._l(e.process.operationList,(function(t,i){return n("bk-button",{key:i,class:t.complete?"is-selected":"",attrs:{"ext-cls":"plugin-btn"},on:{click:function(n){return e.changeOperation(t,i)}}},[e._v("\n              "+e._s(t.name)+"\n            ")])})),1)])]),e._v(" "),n("div",{staticClass:"bk-process-operation clearfix-none"},[n("div",{staticClass:"bk-operation-left"},[n("span",[e._v(e._s(e.$t("插件类型"))+"：")])]),e._v(" "),n("div",{staticClass:"bk-operation-right"},[n("bk-select",{attrs:{clearable:false},on:{change:e.changePluginType},model:{value:e.process.pluginTypeSelected,callback:function(t){e.$set(e.process,"pluginTypeSelected",t)},expression:"process.pluginTypeSelected"}},e._l(e.process.pluginTypeList,(function(e){return n("bk-option",{key:e.id,attrs:{id:e.id,name:e.name}})})),1)],1)]),e._v(" "),n("div",{staticClass:"bk-process-operation clearfix-none"},[n("div",{staticClass:"bk-operation-left"},[n("span",[e._v(e._s(e.$t("选择插件"))+"：")])]),e._v(" "),n("div",{staticClass:"bk-operation-right"},[n("bk-select",{attrs:{searchable:"",clearable:false},on:{change:e.changePlugin},model:{value:e.process.plugInfo.name,callback:function(t){e.$set(e.process.plugInfo,"name",t)},expression:"process.plugInfo.name"}},e._l(e.process.pluginList,(function(e){return n("bk-option",{key:e.id,attrs:{id:e.name,name:e.name,disabled:e.disabled}})})),1),e._v(" "),e.process.plugInfo.name?n("div",{staticClass:"bk-right-info"},[n("span",{staticClass:"bk-info-icon"},[e._v("!")]),e._v(" "),n("span",[n("span",{staticStyle:{"margin-right":"14px"}},[e._v(e._s(e.process.plugInfo.name))]),e._v(e._s(e.process.plugInfo.details)+"\n            ")])]):e._e()],1)])])]):e._e(),e._v(" "),e.tabActive==="update"?n("div",{staticClass:"bk-operat-process"},[n("div",{staticClass:"bk-process-info"},[n("div",{staticClass:"bk-process-operation clearfix-none"},[n("div",{staticClass:"bk-operation-left"},[n("span",[e._v(e._s(e.$t("选择要变更的服务"))+"：")])]),e._v(" "),n("div",{staticClass:"bk-operation-right"},[n("bk-select",{attrs:{disabled:e.pluginUpload.serviceDisabled},model:{value:e.pluginUpload.serviceSelected,callback:function(t){e.$set(e.pluginUpload,"serviceSelected",t)},expression:"pluginUpload.serviceSelected"}},e._l(e.pluginUpload.serviceList,(function(e){return n("bk-option",{key:e.id,attrs:{id:e.id,name:e.name}})})),1)],1)]),e._v(" "),n("div",{staticClass:"bk-process-operation clearfix-none"},[n("div",{staticClass:"bk-operation-left"},[n("span",[e._v(e._s(e.$t("插件类型"))+"：")])]),e._v(" "),n("div",{staticClass:"bk-operation-right"},[n("bk-select",{attrs:{clearable:false},on:{change:e.changePluginType},model:{value:e.process.pluginTypeSelected,callback:function(t){e.$set(e.process,"pluginTypeSelected",t)},expression:"process.pluginTypeSelected"}},e._l(e.process.pluginTypeList,(function(e){return n("bk-option",{key:e.id,attrs:{id:e.id,name:e.name}})})),1)],1)]),e._v(" "),n("div",{staticClass:"bk-process-operation clearfix-none"},[n("div",{staticClass:"bk-operation-left"},[n("span",[e._v(e._s(e.$t("选择要更新的插件"))+"：")])]),e._v(" "),n("div",{staticClass:"bk-operation-right"},[n("bk-select",{attrs:{searchable:"",clearable:false},on:{selected:e.changePlugin},model:{value:e.process.plugInfo.name,callback:function(t){e.$set(e.process.plugInfo,"name",t)},expression:"process.plugInfo.name"}},e._l(e.process.pluginList,(function(e){return n("bk-option",{key:e.id,attrs:{id:e.name,name:e.name,disabled:e.disabled}})})),1),e._v(" "),e.process.plugInfo.name?n("div",{staticClass:"bk-right-info"},[n("span",{staticClass:"bk-info-icon"},[e._v("!")]),e._v(" "),n("span",[n("span",{staticStyle:{"margin-right":"14px"}},[e._v(e._s(e.process.plugInfo.name))]),e._v(e._s(e.process.plugInfo.details)+"\n            ")])]):e._e()],1)]),e._v(" "),n("div",{staticClass:"bk-process-operation clearfix-none"},[n("div",{staticClass:"bk-operation-left"},[n("span",[e._v(e._s(e.$t("选择新包"))+"：")])]),e._v(" "),n("div",{staticClass:"bk-operation-right"},[n("bk-select",{attrs:{clearable:false,loading:e.loadingPackage},on:{change:e.changePackage},model:{value:e.pluginUpload.packageSelected,callback:function(t){e.$set(e.pluginUpload,"packageSelected",t)},expression:"pluginUpload.packageSelected"}},e._l(e.pluginUpload.newPackageList,(function(e){return n("bk-option",{key:e.id,attrs:{id:e.id,name:e.name}})})),1),e._v(" "),e.pluginUpload.packageSelected!==""?n("div",{staticClass:"bk-right-info"},[n("span",{staticClass:"bk-info-icon"},[e._v("!")]),e._v(" "),n("span",[n("span",[e._v("\n                M D 5 "+e._s(e.$t("值"))+":"),n("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e.pluginUpload.packageInfo.mdFive))])]),e._v(" "),n("br"),e._v(" "),n("span",[e._v("\n                "+e._s(e.$t("更新时间"))+":"),n("span",{staticStyle:{"margin-left":"10px"},domProps:{innerHTML:e._s(e.pluginUpload.packageInfo.uploadTime)}})])])]):e._e(),e._v(" "),n("div",{staticClass:"bk-right-checkbox"},[n("form",{staticClass:"bk-form"},[n("div",{staticClass:"bk-form-item"},e._l(e.pluginUpload.packageCheckList,(function(t,i){return n("div",{key:i,staticClass:"bk-form-content",staticStyle:{"margin-left":"0px"}},[n("label",{class:["bk-form-checkbox",{"is-checked":t.checkStatus}],on:{click:function(n){return e.checkPackage(t,i)}}},[n("span",{staticClass:"bk-checkbox"}),e._v(" "),n("input",{attrs:{type:"hidden",name:"checkPackage"},domProps:{checked:t.checkStatus}}),e._v(" "),n("span",{staticClass:"bk-checkbox-text"},[e._v(e._s(t.name))])])])})),0)])])],1)])])]):e._e(),e._v(" "),e.fileInfo.showStatus?n("div",{staticClass:"bk-shade"},[n("div",{staticClass:"bk-file-more"},[n("div",{staticClass:"bk-head"},[n("span",[e._v(e._s(e.$t("文件预览")))]),e._v(" "),n("span",{staticClass:"bk-head-close",on:{click:e.closeFile}},[n("i",{staticClass:"bk-icon icon-close"})])]),e._v(" "),n("div",{staticClass:"bk-content"},[n("ul",e._l(e.fileInfo.list,(function(t,i){return n("li",{key:i},[n("span",[e._v(e._s(t.name))])])})),0)]),e._v(" "),n("div",{staticClass:"bk-file-btn"},[n("bk-button",{attrs:{type:"default"},on:{click:e.closeFile}},[e._v("\n          "+e._s(e.$t("关闭"))+"\n        ")])],1)])]):e._e(),e._v(" "),n("div",{staticClass:"bk-process-btn mt30"},[n("bk-button",{attrs:{theme:"default",disabled:e.secondClick},on:{click:function(t){return e.stepHandle(1)}}},[e._v("\n      "+e._s(e.$t("上一步"))+"\n    ")]),e._v(" "),n("span",{staticStyle:{"margin-left":"20px"}}),e._v(" "),n("bk-button",{attrs:{theme:"primary",loading:e.secondClick},on:{click:e.clickNext}},[e._v("\n      "+e._s(e.$t("立即执行"))+"\n    ")])],1)])};var s=[]}}]);